--- charts-original/templates/_helpers.tpl
+++ charts/templates/_helpers.tpl
@@ -56,3 +56,29 @@
 {{- end }}
 app.kubernetes.io/managed-by: {{ .Release.Service }}
 {{- end -}}
+
+{{- define "system_default_registry" -}}
+{{- if .Values.global.cattle.systemDefaultRegistry -}}
+{{- printf "%s/" .Values.global.cattle.systemDefaultRegistry -}}
+{{- else -}}
+{{- "" -}}
+{{- end -}}
+{{- end -}}
+
+{{- define "windowsEnabled" }}
+  {{- if not (kindIs "invalid" .Values.global.cattle.windows) }}
+  {{- if not (kindIs "invalid" .Values.global.cattle.windows.enabled) }}
+  {{- if .Values.global.cattle.windows.enabled }}
+true
+  {{- end }}
+  {{- end }}
+  {{- end }}
+{{- end }}
+
+{{- define "windowsPathPrefix" }}
+{{- $pathPrefix := (required "Must provide value for .Values.global.cattle.rkeWindowsPathPrefix" .Values.global.cattle.rkeWindowsPathPrefix) -}}
+{{- if (contains "\\" $pathPrefix) -}}
+{{- fail ".Values.global.cattle.rkeWindowsPathPrefix must not contain backslashes" -}}
+{{- end -}}
+{{- dir .Values.global.cattle.rkeWindowsPathPrefix }}
+{{- end }}
